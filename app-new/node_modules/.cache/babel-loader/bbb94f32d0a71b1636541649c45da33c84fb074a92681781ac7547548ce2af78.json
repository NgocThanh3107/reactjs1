{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";let token=localStorage.getItem(\"token\");let auth=localStorage.getItem(\"auth\");auth=JSON.parse(auth);let id_blog=localStorage.getItem(\"Id\");function Comment(props){let idcha=props.id;const[item,setItem]=useState({message:\"\"});let comments=item.message;const[err,setErr]=useState([]);function handleIP(e){let getName=e.target.name;let getValue=e.target.value;setItem(state=>({...state,[getName]:getValue}));}function handleSubmit(e){e.preventDefault();let login=localStorage.getItem(\"checkLogin\");let errObj={};if(login==null){errObj.Comment=\"vui long dang nhap\";setErr(errObj);}else{// da logiin roi \nif(item.message==\"\"){errObj.message=\"vui long nhap binh luan\";setErr(errObj);}else{let config={headers:{'Authorization':'Bearer '+token,'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'}};const formData=new FormData();formData.append('id_blog',id_blog);formData.append('id_user',auth.id);// formData.append('id_comment', 0);\nformData.append('id_comment',idcha?idcha:0);formData.append('comment',comments);formData.append('image_user',auth.avatar);formData.append('name_user',auth.name);axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/comment/\"+id_blog,formData,config).then(res=>{// console.log(res.data.data);\nif(res.data.errors){setErr(res.data.errors);}else{// localStorage.setItem(\"cmt\",res.data.data.comment)\nprops.getCmt(res.data.data);console.log(res.data.data);}}).catch(function(error){console.log(error);});}}}function showErr(){if(Object.keys(err).length>0){return Object.keys(err).map((key,index)=>{return/*#__PURE__*/_jsx(\"li\",{children:err[key]},key);});}}return/*#__PURE__*/_jsx(\"div\",{class:\"replay-box\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-sm-12\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Leave a replay\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"text-area\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"blank-arrow\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Your Name\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"*\"}),showErr(),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"cmt\",children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",rows:\"11\",onChange:handleIP}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary\",children:\"Post comment\"})]})]})]})})});}export default Comment;","map":{"version":3,"names":["axios","useEffect","useState","jsx","_jsx","jsxs","_jsxs","token","localStorage","getItem","auth","JSON","parse","id_blog","Comment","props","idcha","id","item","setItem","message","comments","err","setErr","handleIP","e","getName","target","name","getValue","value","state","handleSubmit","preventDefault","login","errObj","config","headers","formData","FormData","append","avatar","post","then","res","data","errors","getCmt","console","log","catch","error","showErr","Object","keys","length","map","key","index","children","class","onSubmit","rows","onChange","type"],"sources":["C:/Users/ASUS/Desktop/react.js/app-new/src/Component/blog/Comment.js"],"sourcesContent":["import axios from \"axios\"\r\nimport { useEffect, useState } from \"react\"\r\n\r\n\r\n    let token = localStorage.getItem(\"token\");\r\n\r\n    let auth =  localStorage.getItem(\"auth\");\r\n        auth = JSON.parse(auth);\r\n\r\n    let id_blog = localStorage.getItem(\"Id\");\r\n     \r\n\r\nfunction Comment(props){\r\n    let idcha = props.id;\r\n\r\n    const [item, setItem] = useState({\r\n        message:\"\"\r\n    });\r\n    let comments = item.message;  \r\n   \r\n    const [err,setErr] = useState([]);\r\n\r\n    function handleIP(e){\r\n        let getName= e.target.name\r\n        let getValue = e.target.value\r\n        setItem(state => ({...state,[getName]:getValue}))\r\n    }\r\n    \r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        let login = localStorage.getItem(\"checkLogin\");\r\n        \r\n        let errObj = {};\r\n\r\n        if(login == null){\r\n            errObj.Comment = \"vui long dang nhap\";\r\n            setErr(errObj)\r\n        }else{\r\n            // da logiin roi \r\n            if(item.message == \"\"){\r\n                errObj.message = \"vui long nhap binh luan\"\r\n                setErr(errObj)\r\n            }else{\r\n                let config ={\r\n                    headers: {\r\n                        'Authorization': 'Bearer '+ token,\r\n                        'Content-Type': 'application/x-www-form-urlencoded',\r\n                        'Accept': 'application/json'\r\n                    }\r\n                };\r\n\r\n              \r\n                const formData = new FormData();\r\n                formData.append('id_blog', id_blog);\r\n                formData.append('id_user', auth.id);\r\n                // formData.append('id_comment', 0);\r\n                formData.append('id_comment', idcha ? idcha : 0);\r\n                formData.append('comment', comments);\r\n                formData.append('image_user', auth.avatar);\r\n                formData.append('name_user', auth.name);\r\n\r\n                axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/comment/\" + id_blog, formData, config)\r\n                .then((res) =>{\r\n                        // console.log(res.data.data);\r\n                    if(res.data.errors){\r\n                        setErr(res.data.errors)\t\r\n                    }else{  \r\n                        // localStorage.setItem(\"cmt\",res.data.data.comment)\r\n                        props.getCmt(res.data.data); \r\n                        console.log(res.data.data);\r\n                    }\r\n                })\r\n                .catch(function(error){\r\n                    console.log(error)\r\n                })\r\n            }\r\n        }   \r\n    }\r\n    \r\n    function showErr(){\r\n        if(Object.keys(err).length > 0){\r\n            return Object.keys(err).map((key,index)=>{\r\n              return(\r\n                <li key={key}>\r\n                  {err[key]}\r\n                </li>\r\n              )\r\n            })\r\n          }\r\n    }\r\n\r\n    return(\t\r\n        <div class=\"replay-box\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-sm-12\">\r\n\t\t\t\t\t<h2>Leave a replay</h2>\t\t\r\n                    <div class=\"text-area\">\r\n                        <div class=\"blank-arrow\">\r\n                            <label>Your Name</label>\r\n                        </div>\r\n                        <span>*</span>\r\n                        {showErr()}\r\n                        <form onSubmit={handleSubmit} id=\"cmt\">    \r\n                            <textarea name=\"message\" rows=\"11\" onChange={handleIP} ></textarea>\r\n                            <button type=\"submit\" class=\"btn btn-primary\">Post comment</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n                     \r\n    )\r\n}\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}