{"ast":null,"code":"import StarRatings from'react-star-ratings';import{useEffect,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";let token=localStorage.getItem(\"token\");let auth=localStorage.getItem(\"auth\");auth=JSON.parse(auth);let id_blog=localStorage.getItem(\"Id\");function Rate(){const[rating,setRating]=useState(0);// console.log(rating)\nuseEffect(()=>{axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\"+id_blog).then(res=>{const lengthArr=[1,4,3,6];let areaArr=lengthArr.map(length=>length*length);console.log(areaArr);//[1, 16, 9, 36]\n// tbc = tong rate + so nguoi rate\n// console.log(res.data.data)/\n// let arr = res.data.data;\n// let sum = 0;\n// if(arr.lenght > 0){\n//   return arr.map((value,key)=>{\n//         sum += arr[key];\n//         console.log(sum)\n//     })\n// }\n});},[]);function changeRating(newRating,name){setRating(newRating);// - xu ly logic\nlet login=localStorage.getItem(\"checkLogin\");if(login==null){alert(\"vui long dang nhap de danh gia\");}else{alert(\"ok\");// - xu ly api\nlet config={headers:{'Authorization':'Bearer '+token,'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'}};const formData=new FormData();formData.append('blog_id',id_blog);formData.append('user_id',auth.id);formData.append('rate',rating);axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\"+id_blog,formData,config).then(res=>{// console.log(res)    \n}).catch(function(error){console.log(error);});}}return/*#__PURE__*/_jsx(StarRatings,{rating:rating,starRatedColor:\"blue\",changeRating:changeRating,numberOfStars:6,name:\"rating\"});}export default Rate;","map":{"version":3,"names":["StarRatings","useEffect","useState","axios","jsx","_jsx","token","localStorage","getItem","auth","JSON","parse","id_blog","Rate","rating","setRating","get","then","res","lengthArr","areaArr","map","length","console","log","changeRating","newRating","name","login","alert","config","headers","formData","FormData","append","id","post","catch","error","starRatedColor","numberOfStars"],"sources":["C:/Users/ASUS/Desktop/react.js/app-new/src/Component/blog/Rate.js"],"sourcesContent":["import StarRatings from 'react-star-ratings';\r\nimport { useEffect, useState } from \"react\"; \r\nimport axios from 'axios';\r\n\r\n        let token = localStorage.getItem(\"token\");\r\n        let auth =  localStorage.getItem(\"auth\");\r\n            auth = JSON.parse(auth);\r\n        let id_blog = localStorage.getItem(\"Id\");\r\n\r\n    function Rate(){\r\n        const [rating, setRating] = useState(0);\r\n        // console.log(rating)\r\n       \r\n        useEffect(()=>{\r\n            axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog) \r\n            .then(res=>{\r\n                const lengthArr = [1, 4, 3, 6];\r\n                let areaArr = lengthArr.map(length => length * length);\r\n                console.log(areaArr);//[1, 16, 9, 36]\r\n                // tbc = tong rate + so nguoi rate\r\n            // console.log(res.data.data)/\r\n\r\n            // let arr = res.data.data;\r\n            // let sum = 0;\r\n            // if(arr.lenght > 0){\r\n            //   return arr.map((value,key)=>{\r\n            //         sum += arr[key];\r\n            //         console.log(sum)\r\n            //     })\r\n                \r\n               \r\n\r\n            // }\r\n            \r\n\r\n            })\r\n        },[]);\r\n\r\n        function changeRating( newRating, name ){\r\n            setRating(newRating)\r\n           \r\n            // - xu ly logic\r\n            let login = localStorage.getItem(\"checkLogin\");\r\n            if(login==null){\r\n                alert(\"vui long dang nhap de danh gia\");\r\n            }\r\n            else{\r\n                alert(\"ok\")\r\n                // - xu ly api\r\n                let config ={\r\n                    headers: {\r\n                        'Authorization': 'Bearer '+ token,\r\n                        'Content-Type': 'application/x-www-form-urlencoded',\r\n                        'Accept': 'application/json'\r\n                    }\r\n                };\r\n\r\n                const formData = new FormData();\r\n                formData.append('blog_id', id_blog);\r\n                formData.append('user_id', auth.id);       \r\n                formData.append('rate', rating);\r\n            \r\n                axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog, formData, config)\r\n                    .then((res) =>{\r\n                        // console.log(res)    \r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error)\r\n                    })\r\n            }\r\n        } \r\n\r\n        return (      \r\n          <StarRatings \r\n            rating={rating}\r\n            starRatedColor=\"blue\"\r\n            changeRating={changeRating}\r\n            numberOfStars={6}\r\n            name='rating'\r\n          /> \r\n        ); \r\n    }\r\n   export default Rate; "],"mappings":"AAAA,MAAO,CAAAA,WAAW,KAAM,oBAAoB,CAC5C,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElB,GAAI,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzC,GAAI,CAAAC,IAAI,CAAIF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACpCC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC,CAC3B,GAAI,CAAAG,OAAO,CAAGL,YAAY,CAACC,OAAO,CAAC,IAAI,CAAC,CAE5C,QAAS,CAAAK,IAAIA,CAAA,CAAE,CACX,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CACvC;AAEAD,SAAS,CAAC,IAAI,CACVE,KAAK,CAACa,GAAG,CAAC,+DAA+D,CAAGJ,OAAO,CAAC,CACnFK,IAAI,CAACC,GAAG,EAAE,CACP,KAAM,CAAAC,SAAS,CAAG,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAC9B,GAAI,CAAAC,OAAO,CAAGD,SAAS,CAACE,GAAG,CAACC,MAAM,EAAIA,MAAM,CAAGA,MAAM,CAAC,CACtDC,OAAO,CAACC,GAAG,CAACJ,OAAO,CAAC,CAAC;AACrB;AACJ;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAGA,CAAC,CAAC,CACN,CAAC,CAAC,EAAE,CAAC,CAEL,QAAS,CAAAK,YAAYA,CAAEC,SAAS,CAAEC,IAAI,CAAE,CACpCZ,SAAS,CAACW,SAAS,CAAC,CAEpB;AACA,GAAI,CAAAE,KAAK,CAAGrB,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC9C,GAAGoB,KAAK,EAAE,IAAI,CAAC,CACXC,KAAK,CAAC,gCAAgC,CAAC,CAC3C,CAAC,IACG,CACAA,KAAK,CAAC,IAAI,CAAC,CACX;AACA,GAAI,CAAAC,MAAM,CAAE,CACRC,OAAO,CAAE,CACL,eAAe,CAAE,SAAS,CAAEzB,KAAK,CACjC,cAAc,CAAE,mCAAmC,CACnD,QAAQ,CAAE,kBACd,CACJ,CAAC,CAED,KAAM,CAAA0B,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,SAAS,CAAEtB,OAAO,CAAC,CACnCoB,QAAQ,CAACE,MAAM,CAAC,SAAS,CAAEzB,IAAI,CAAC0B,EAAE,CAAC,CACnCH,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEpB,MAAM,CAAC,CAE/BX,KAAK,CAACiC,IAAI,CAAC,+DAA+D,CAAGxB,OAAO,CAAEoB,QAAQ,CAAEF,MAAM,CAAC,CAClGb,IAAI,CAAEC,GAAG,EAAI,CACV;AAAA,CACH,CAAC,CACDmB,KAAK,CAAC,SAASC,KAAK,CAAC,CAClBf,OAAO,CAACC,GAAG,CAACc,KAAK,CAAC,CACtB,CAAC,CAAC,CACV,CACJ,CAEA,mBACEjC,IAAA,CAACL,WAAW,EACVc,MAAM,CAAEA,MAAO,CACfyB,cAAc,CAAC,MAAM,CACrBd,YAAY,CAAEA,YAAa,CAC3Be,aAAa,CAAE,CAAE,CACjBb,IAAI,CAAC,QAAQ,CACd,CAAC,CAER,CACD,cAAe,CAAAd,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}