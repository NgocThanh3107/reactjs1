{"ast":null,"code":"import StarRatings from'react-star-ratings';import{useEffect,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";let token=localStorage.getItem(\"token\");let auth=localStorage.getItem(\"auth\");auth=JSON.parse(auth);let id_blog=localStorage.getItem(\"Id\");function Rate(){const[rating,setRating]=useState(0);// console.log(rating)\nuseEffect(()=>{axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\"+id_blog).then(res=>{// tbc = tong sao rate / so nguoi rate\n// console.log(res.data.data)\nlet obj=res.data.data;let sum=0;if(Object.keys(obj).length>0){Object.keys(obj).map((key,index)=>{sum+=obj[key][\"rate\"];const tbc=sum/Object.keys(obj).length;setRating(tbc);});}});},[]);function changeRating(newRating,name){setRating(newRating);// - xu ly logic\nlet login=localStorage.getItem(\"checkLogin\");if(login==null){alert(\"vui long dang nhap de danh gia\");}else{alert(\"ok\");// - xu ly api\nlet config={headers:{'Authorization':'Bearer '+token,'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'}};const formData=new FormData();formData.append('blog_id',id_blog);formData.append('user_id',auth.id);formData.append('rate',rating);axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\"+id_blog,formData,config).then(res=>{// console.log(res)    \n}).catch(function(error){console.log(error);});}}return/*#__PURE__*/_jsx(StarRatings,{rating:rating,starRatedColor:\"blue\",changeRating:changeRating,numberOfStars:6,name:\"rating\"});}export default Rate;","map":{"version":3,"names":["StarRatings","useEffect","useState","axios","jsx","_jsx","token","localStorage","getItem","auth","JSON","parse","id_blog","Rate","rating","setRating","get","then","res","obj","data","sum","Object","keys","length","map","key","index","tbc","changeRating","newRating","name","login","alert","config","headers","formData","FormData","append","id","post","catch","error","console","log","starRatedColor","numberOfStars"],"sources":["C:/Users/ASUS/Desktop/react.js/app-new/src/Component/blog/Rate.js"],"sourcesContent":["import StarRatings from 'react-star-ratings';\r\nimport { useEffect, useState } from \"react\"; \r\nimport axios from 'axios';\r\n\r\n        let token = localStorage.getItem(\"token\");\r\n        let auth =  localStorage.getItem(\"auth\");\r\n            auth = JSON.parse(auth);\r\n        let id_blog = localStorage.getItem(\"Id\");\r\n\r\n    function Rate(){\r\n        const [rating, setRating] = useState(0);\r\n        // console.log(rating)\r\n       \r\n        useEffect(()=>{\r\n            axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog) \r\n            .then(res=>{\r\n               \r\n                // tbc = tong sao rate / so nguoi rate\r\n            // console.log(res.data.data)\r\n\r\n            let obj = res.data.data;\r\n    \r\n            let sum = 0;\r\n            \r\n            if(Object.keys(obj).length > 0){\r\n                Object.keys(obj).map((key,index)=>{(\r\n                   sum += obj[key][\"rate\"]\r\n                )\r\n                    const tbc = sum / Object.keys(obj).length;\r\n                    setRating(tbc);\r\n                }) \r\n            }\r\n            \r\n\r\n\r\n            \r\n\r\n            })\r\n        },[]);\r\n\r\n        function changeRating( newRating, name ){\r\n            setRating(newRating)\r\n           \r\n            // - xu ly logic\r\n            let login = localStorage.getItem(\"checkLogin\");\r\n            if(login==null){\r\n                alert(\"vui long dang nhap de danh gia\");\r\n            }\r\n            else{\r\n                alert(\"ok\")\r\n                // - xu ly api\r\n                let config ={\r\n                    headers: {\r\n                        'Authorization': 'Bearer '+ token,\r\n                        'Content-Type': 'application/x-www-form-urlencoded',\r\n                        'Accept': 'application/json'\r\n                    }\r\n                };\r\n\r\n                const formData = new FormData();\r\n                formData.append('blog_id', id_blog);\r\n                formData.append('user_id', auth.id);       \r\n                formData.append('rate', rating);\r\n            \r\n                axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog, formData, config)\r\n                    .then((res) =>{\r\n                        // console.log(res)    \r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error)\r\n                    })\r\n            }\r\n        } \r\n\r\n        return (      \r\n          <StarRatings \r\n            rating={rating}\r\n            starRatedColor=\"blue\"\r\n            changeRating={changeRating}\r\n            numberOfStars={6}\r\n            name='rating'\r\n          /> \r\n        ); \r\n    }\r\n   export default Rate; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}