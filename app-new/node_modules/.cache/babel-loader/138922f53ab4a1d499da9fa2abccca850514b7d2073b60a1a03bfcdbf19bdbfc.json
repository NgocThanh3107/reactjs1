{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\react.js\\\\app-new\\\\src\\\\Component\\\\blog\\\\Rate.js\",\n  _s = $RefreshSig$();\nimport StarRatings from 'react-star-ratings';\nimport { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet token = localStorage.getItem(\"token\");\nlet auth = localStorage.getItem(\"auth\");\nauth = JSON.parse(auth);\nlet id_blog = localStorage.getItem(\"Id\");\nfunction Rate() {\n  _s();\n  const [rating, setRating] = useState(0);\n  // console.log(rating)\n\n  useEffect(() => {\n    axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog).then(res => {\n      // setRating(res.data.data);\n      // console.log(res.data.data)\n      let arr = res.data.data;\n      function sumArray(arr) {\n        let sum = 0;\n        if (arr.lenght > 0) return arr.map(function (value) {\n          sum += value;\n        });\n        return sum;\n      }\n      console.log(sumArray(arr));\n    });\n  }, []);\n  function changeRating(newRating, name) {\n    setRating(newRating);\n\n    // - xu ly logic\n    let login = localStorage.getItem(\"checkLogin\");\n    if (login == null) {\n      alert(\"vui long dang nhap de danh gia\");\n    } else {\n      alert(\"ok\");\n      // - xu ly api\n      let config = {\n        headers: {\n          'Authorization': 'Bearer ' + token,\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Accept': 'application/json'\n        }\n      };\n      const formData = new FormData();\n      formData.append('blog_id', id_blog);\n      formData.append('user_id', auth.id);\n      formData.append('rate', rating);\n      axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog, formData, config).then(res => {\n        // console.log(res)    \n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(StarRatings, {\n    rating: rating,\n    starRatedColor: \"blue\",\n    changeRating: changeRating,\n    numberOfStars: 6,\n    name: \"rating\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 11\n  }, this);\n}\n_s(Rate, \"8rbI23c/FRQaeP/4pqFlAKenwQg=\");\n_c = Rate;\nexport default Rate;\nvar _c;\n$RefreshReg$(_c, \"Rate\");","map":{"version":3,"names":["StarRatings","useEffect","useState","axios","jsxDEV","_jsxDEV","token","localStorage","getItem","auth","JSON","parse","id_blog","Rate","_s","rating","setRating","get","then","res","arr","data","sumArray","sum","lenght","map","value","console","log","changeRating","newRating","name","login","alert","config","headers","formData","FormData","append","id","post","catch","error","starRatedColor","numberOfStars","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/react.js/app-new/src/Component/blog/Rate.js"],"sourcesContent":["import StarRatings from 'react-star-ratings';\r\nimport { useEffect, useState } from \"react\"; \r\nimport axios from 'axios';\r\n\r\n        let token = localStorage.getItem(\"token\");\r\n        let auth =  localStorage.getItem(\"auth\");\r\n            auth = JSON.parse(auth);\r\n        let id_blog = localStorage.getItem(\"Id\");\r\n\r\n    function Rate(){\r\n        const [rating, setRating] = useState(0);\r\n        // console.log(rating)\r\n       \r\n        useEffect(()=>{\r\n            axios.get(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog) \r\n            .then(res=>{\r\n            // setRating(res.data.data);\r\n            // console.log(res.data.data)\r\n            let arr = res.data.data;\r\n            function sumArray(arr){\r\n                let sum = 0;\r\n                if(arr.lenght > 0)\r\n               return (arr).map(function(value){\r\n                sum += value;\r\n                 });\r\n            \r\n                return sum;\r\n                }\r\n            console.log(sumArray(arr))\r\n            })\r\n        },[]);\r\n\r\n        function changeRating( newRating, name ){\r\n            setRating(newRating)\r\n           \r\n            // - xu ly logic\r\n            let login = localStorage.getItem(\"checkLogin\");\r\n            if(login==null){\r\n                alert(\"vui long dang nhap de danh gia\");\r\n            }\r\n            else{\r\n                alert(\"ok\")\r\n                // - xu ly api\r\n                let config ={\r\n                    headers: {\r\n                        'Authorization': 'Bearer '+ token,\r\n                        'Content-Type': 'application/x-www-form-urlencoded',\r\n                        'Accept': 'application/json'\r\n                    }\r\n                };\r\n\r\n                const formData = new FormData();\r\n                formData.append('blog_id', id_blog);\r\n                formData.append('user_id', auth.id);       \r\n                formData.append('rate', rating);\r\n            \r\n                axios.post(\"http://localhost:8080/laravel8/laravel8/public/api/blog/rate/\" + id_blog, formData, config)\r\n                    .then((res) =>{\r\n                        // console.log(res)    \r\n                    })\r\n                    .catch(function(error){\r\n                        console.log(error)\r\n                    })\r\n            }\r\n        } \r\n\r\n        return (      \r\n          <StarRatings \r\n            rating={rating}\r\n            starRatedColor=\"blue\"\r\n            changeRating={changeRating}\r\n            numberOfStars={6}\r\n            name='rating'\r\n          /> \r\n        ); \r\n    }\r\n   export default Rate; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}